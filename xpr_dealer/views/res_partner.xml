<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE openerp SYSTEM "openerp.dtd">
<openerp>
  <data>
   

    <!-- partners -->
  <record id="view_partner_form" model="ir.ui.view">
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="partner_history.view_partner_form_history"/>
      <field name="arch" type="xml">
        <xpath expr="//page[@string='Flat History']" position="attributes">
          <attribute name="string">Full History</attribute>
        </xpath>

        <field name="category_id" position="replace">
            <field name="code" attrs="{'invisible': [('is_company','=', False)], 'required' : [('is_company','=', True)]}"/>
           <!--  <label for="dealer" string="Is a Dealer" attrs="{'invisible': [('is_company','=', False)]}"/>
            <field name="dealer" widget="many2onebutton" readonly="True" attrs="{'invisible': [('is_company','=', False)]}" /> -->

            <field name="category_id" widget="many2many_tags" domain="['|', '|', '|', '|',('parent_id','child_of', %(category_dealer_group)d ), ('id','child_of', %(category_dealer_certification_automatic)d ), ('id','child_of', %(category_dealer_certification_manual)d ), ('id','child_of', %(category_dealer_marketing_association)d ), ('id','child_of', %(category_dealer_association)d )]"/>

        </field>

    </field>
  </record>

  <record id="view_dealer_form" model="ir.ui.view">
      <field name="model">xpr_dealer.dealer</field>
      <field name="arch" type="xml">
        <form string="Dealer Info">
          <sheet>
            <h1>Dealer Info</h1> 
            <group>
        
                <group>
                  <field name="partner"/>
                  <field name="corpname"/>
                  <field name="responsible"/>
                  <field name="quoteflag"/>
                </group>

                <group>
                   <field name="tollfree"/>
                   <field name="callsource_tollfree"/>
                   <field name="website_french"/>
                   <field name="additional_website"/>
                </group>
         
                <group>
                  <field name="billing_street"/>
                  <field name="billing_street2"/>
                  <field name="billing_city"/>
                  <field name="billing_zip"/>
                  <field name="billing_state_id"/>
                  <field name="billing_country_id"/>
                </group>
                <group>
                  <field name="geolat"/>
                  <field name="geolon"/>
                </group>
                <group>
                  <field name="makes" widget="many2many_tags"
                    domain="[('parent_id', 'child_of', %(category_dealer_industry)d)]"/>

                    <field name="business" widget="many2many_tags"
                    domain="[('parent_id', '=', %(category_dealer_business)d)]"/>

                    <field name="customer" widget="many2many_tags"
                    domain="[('parent_id', '=', %(category_dealer_customer)d)]"/>
                </group>

                <group>
                      <field name="user10"/>
                      <field name="user12"/>
                      <field name="user12e"/>
                      <field name="user40"/>
                      <field name="user40e"/>
                      <field name="user80"/>
                </group>
                <group>
                    <field name="telephone_choice"/>
                    <field name="site_type"/>
                    <field name="owner"/>
                    <field name="owneremail"/>
                </group>
                <group>
                    <field name="market"
                        domain="[('parent_id', 'child_of', %(category_dealer_market)d)]"/>
                    <field name="region" 
                        domain="[('parent_id', 'child_of', %(category_dealer_region)d)]"/>
                    <field name="portalmask" widget="many2many_tags"
                        domain="[('parent_id', 'child_of', %(category_dealer_portal)d)]"/>
                </group>
            
          </group>
          </sheet>
        </form>
        
      </field>
  </record>

  </data>
</openerp>
